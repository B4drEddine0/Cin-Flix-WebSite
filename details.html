<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Details</title>
</head>
<body>
    <header class="container">
        <nav class="navbar">
            <div>
                <img src="images/logo.svg" alt="logo">
            </div>
            <div class="mode">
                <i class="fa fa-moon-o" aria-hidden="true" id="mode-icon"></i>
            </div>
            <div class="hammm">
                <ul>
                    <li><a href="index.html" class="modeH">Home</a></li>
                    <li><a href="index.html#sec3" class="modeH">Movies</a></li>
                    <li><a href="mylist.html" class="modeH">Favoris</a></li>
                </ul>
            </div>
            <label for="ham" class="hamburger">&#9776;</label>
        </nav>
    </header>

    <main class="details1">
        <div class="container det1">
            <div>
                <h3>#1 Most Popular</h3>
                <h1>Mojave Diamonds</h1>
                <p>Denji has a simple dream—to live a happy and peaceful life, spending time with a girl he likes. This is a far cry from reality, however, as Denji is forced by the yakuza into killing devils in order to pay off his crushing debts. Using his pet devil Pochita as a ...
                </p>
                <img src="images/stars.png" alt="stars" id="str">
                <p>Action • Movie</p>
                <button class="btn1">Watch Now</button>
                <button class="btn2">Trailer</button>
            </div>
            <div>
                <img src="images/mv2.png" alt="img2" class="img2">
                <div class="btns">
                    <a href=""><img src="images/addlist.svg" alt="addlist" id="list" style="width: 15%;margin-right: 60px;margin-top: 10px;"></a>
                    <a href=""><img src="images/share.svg" alt="share"></a>
                    <a href=""><img src="images/like.svg" alt="like" id="like"></a> <p style="margin-left: 300px; font-weight: 600; display: inline-block;margin-left: 260px;width: 12%;" id="like-count">1555</p> <span style="color: #FFB100;font-size: 20px;">Likes</span>
                </div>
            </div>
        </div>
    </main>

    <section class="container det2">
        <div class="sec3-top">
            <h1>
                Similar Movies for you
            </h1>
            <div style="width:75%;">
             <hr>   
            </div>
            
        </div>
        <div  class="films" style="display: flex;overflow: hidden;gap: 15px;">
            <div class="movie-card" data-title="Hypnotic" data-image="images/mv1.png">
                 
                <img src="images/mv1.png" alt="Movies">
                <h3>Hypnotic</h3>
                <p><pre>2024        104m</pre></p>
    </div>
        <div class="movie-card" data-title="Mojave Diamonds" data-image="images/mv2.png">
            <img src="images/mv2.png" alt="Movies">
            <h3>Mojave Diamonds</h3>
            <p><pre>2024        104m</pre></p>
        </div>
        <div class="movie-card" data-title="Mojave" data-image="images/mv3.png">
            <img src="images/mv3.png" alt="Movies">
            <h3>Mojave</h3>
            <p><pre>2024        104m</pre></p>
        </div>
        <div class="movie-card" data-title="Crossfire" data-image="images/mv4.png">
            <img src="images/mv4.png" alt="Movies">
            <h3>Crossfire</h3>
            <p><pre>2024        104m</pre></p>
        </div>
        <div class="movie-card" data-title="Fast X" data-image="images/mv5.png">
            <img src="images/mv5.png" alt="Movies">
            <h3>Fast X</h3>
            <p><pre>2024        104m</pre></p>
        </div>
        <div class="movie-card" data-title="The Pregnancy" data-image="images/mv6.png">
            <img src="images/mv6.png" alt="Movies">
            <h3>The Pregnancy </h3>
            <p><pre>2024        104m</pre></p>
        </div>
        <div class="movie-card crd" data-title="The DAYS" data-image="images/mv7.png">
            <img src="images/mv7.png" alt="Movies">
            <h3>THE DAYS</h3>
            <p><pre>2024        104m</pre></p>
        </div>
        <div class="movie-card crd" data-title="Days of Daisy" data-image="images/mv8.png">
            <img src="images/mv8.png" alt="Movies">
            <h3>Days of Daisy</h3>
            <p><pre>2024        104m</pre></p>
        </div>
        <div class="movie-card crd" data-title="Turn of the Tide" data-image="images/mv9.png">
            <img src="images/mv9.png" alt="Movies">
            <h3>Turn of the Tide</h3>
            <p><pre>2024        104m</pre></p>
        </div>
        <div class="movie-card crd" data-title="The Prank Panel" data-image="images/mv10.png">
            <img src="images/mv10.png" alt="Movies">
            <h3>The Prank Panel</h3>
            <p><pre>2024        104m</pre></p>
        </div>
        <div class="movie-card crd" data-title="The Idol" data-image="images/mv11.png">
            <img src="images/mv11.png" alt="Movies">
            <h3>The Idol</h3>
            <p><pre>2024        104m</pre></p>
        </div>
        <div class="movie-card crd" data-title="The Gryphon" data-image="images/mv12.png">
            <img src="images/mv12.png" alt="Movies">
            <h3>The Gryphon</h3>
            <p><pre>2024        104m</pre></p>
        </div>
        </div>
            <button id="prevBtn"><i class="fa fa-chevron-circle-left" aria-hidden="true" id="arrow"></i></button>
            <button id="nextBtn"><i class="fa fa-chevron-circle-right" aria-hidden="true" id="arrow"></i></button>
    </section>


    <section class="container det3">
        <div class="sec3-top">
            <h1 class="modeH">
                Comments
            </h1>
            <div style="width:75%;">
             <hr>   
            </div>
        </div>
            <div class="search">
                <img src="images/profile.svg" alt="profile">
                <input id="search" type="text" placeholder="Type To comment">
                <button id="comment-btn" type="submit">Post</button>
           </div>
           <div class="Comments" style="overflow-y: scroll;height: 58vh;">
            <div class="com">
                <div class="prof">
                    <img src="images/comment1.svg" alt="profile">
                </div>
                <div class="comment detail">
                    <h1>Andrew Jones</h1>
                    <h3>Product Developer at Webflow</h3>
                    <p class="modeP">It works really wonders in the hybrid culture. No echo and seamless integration with the current workflow. Love this application.</p>
                    <div class="rating">
                        <p class="modeP">Rating :</p>
                        <img src="images/Rating.svg" alt="stars" id="rateImg">
                        <p class="modeP">4.6</p>
                    </div>
                </div>
            </div>
            <div class="com">
                <div class="prof">
                    <img src="images/comment2.svg" alt="profile">
                </div>
                <div class="comment detail">
                    <h1>Lauren White</h1>
                    <h3>Product Manager at Zapier</h3>
                    <p class="modeP">It works really wonders in the hybrid culture. No echo and seamless integration with the current workflow. Love this application.</p>
                    <div class="rating">
                        <p class="modeP">Rating :</p>
                        <img src="images/Rating.svg" alt="stars" id="rateImg">
                        <p class="modeP">4.6</p>
                    </div>
                </div>
            </div>
            <div class="com">
                <div class="prof">
                    <img src="images/comment3.svg" alt="profile">
                </div>
                <div class="comment detail">
                    <h1>Adam Smith</h1>
                    <h3>Web Designer at Spotify</h3>
                    <p class="modeP">It works really wonders in the hybrid culture. No echo and seamless integration with the current workflow. Love this application.</p>
                    <div class="rating">
                        <p class="modeP">Rating :</p>
                        <img src="images/Rating.svg" alt="stars" id="rateImg">
                        <p class="modeP">4.6</p>
                    </div>
                </div>
            </div>
           </div>
    </section>

    <footer>
        <div class="foot-top">
             <h1>
                Follow us!
             </h1>
        </div>
       
        <div class="foot-mid">
            <hr>
        </div>
        <div class="foot-bottom">
            <p>© Copyright  2024 BadrEddine | All rights reserved</p>

            <ul>
                <li><a href=""><img src="images/yt-light.svg" alt="icons"></a></li>
                <li><a href=""><img src="images/upwork2-light.svg" alt="icons"></a></li>
                <li><a href=""><img src="images/github-light.svg" alt="icons"></a></li>
                <li><a href=""><img src="images/linkedin-light.svg" alt="icons"></a></li>
            </ul>
        </div>
    </footer>

<script defer>
    const like = document.getElementById('like');
    var likeCount = document.getElementById('like-count');
    let likeinteger = parseInt(likeCount.textContent);
    console.log(typeof(likeCount));

function liked(e){
    e.preventDefault();
    if(like.src.endsWith("like.svg")){
        likeinteger++;
        likeCount.textContent = likeinteger;
        like.src ="images/liked.svg";
        
        
    }else{
        like.src = "images/like.svg";
        likeinteger--;
        likeCount.textContent = likeinteger;
    }
}
like.addEventListener("click",liked);

/***********************************************/
const input = document.getElementById('search');
const commentsContainer = document.querySelector('.Comments');


const loadComments = () => {
    const comments = JSON.parse(localStorage.getItem('comments')) || [];
    comments.forEach(comment => {
        commentsContainer.innerHTML += InsertComment(comment);
    });
};


const InsertComment = (comment) => {
    return `
        <div class="com">
            <div class="prof">
                <img src="images/anony.svg" alt="profile">
            </div>
            <div class="comment detail">
                <h1>Anonymous</h1>
                <h3>Website Visitor</h3>
                <p class="modeP">${comment}</p>
                <div class="rating">
                    <p class="modeP">Rating :</p>
                    <img src="images/Rating.svg" alt="stars" class="rateImg" style="cursor:pointer;" onclick="AddRate(this)">
                    <input type="text" class="rating-input modeP" style="display:none;" placeholder="Enter rating (e.g., 4.6)" onblur="updateRate(this)">
                    <p class="rating-value"></p>
                </div>
            </div>
        </div>
    `;
};

const addComment = () => {
    const commentaire = input.value.trim();
    if (!commentaire) return alert("Please enter a comment.");

    const comments = JSON.parse(localStorage.getItem('comments')) || [];
    comments.push(commentaire);
    localStorage.setItem('comments', JSON.stringify(comments));

    commentsContainer.innerHTML += InsertComment(commentaire);
    alert("Your Comment has been Added");
    input.value = "";
};

loadComments();

document.getElementById('comment-btn').addEventListener('click', addComment);

/*******************************************************************************************/

function AddRate(img) {
    const input = img.nextElementSibling; 
    input.style.display = 'block'; 
    input.focus();
}

function updateRate(input) {
    const ratingValue = input.nextElementSibling;
    const ratingText = input.value;
    ratingValue.innerText = ratingText;
    input.style.display = 'none'; 
}
/*****************************************************************************************/
        const movieCards = document.querySelectorAll('.movie-card');

        movieCards.forEach(card => {
        card.addEventListener('click', function() {
        const title = this.getAttribute('data-title');
        const image = this.getAttribute('data-image');

        localStorage.setItem('movieTitle', title);
        localStorage.setItem('movieImage', image);

        window.location.href = 'details.html';
        });
        });

    const title = localStorage.getItem('movieTitle');
    const image = localStorage.getItem('movieImage');

    document.querySelector('h1').textContent = title; 
    document.querySelector('.img2').src = image;
     

    /***********************************************************************************/
    const list = document.getElementById('list');

    let myList = JSON.parse(localStorage.getItem('myList')) || [];
   
   
    const isInList = myList.some(movie => movie.title === title);
    list.src = isInList ? "images/listadded.png" : "images/addlist.svg";

    function listed(e){
    e.preventDefault();
    
    
    const movie = {
        title: title,
        image: image
    };

      const movieIndex = myList.findIndex(m => m.title === movie.title);

    if (movieIndex === -1) {
        myList.push(movie); 
        list.src = "images/listadded.png"; 
    } else { 
        myList.splice(movieIndex, 1); 
        list.src = "images/addlist.svg";
    }


    localStorage.setItem('myList', JSON.stringify(myList));
}

    list.addEventListener("click", listed);

/***************************************************************************************************/
const films = document.querySelector('.films');

function moveLeft() {
    
    films.scrollBy({
        top:0,
        left:-184,
        behavior:"smooth"
    });
}

function moveRight() {

    films.scrollBy({
        top:0,
        left:184,
        behavior:"smooth"
    });
}

document.getElementById('prevBtn').addEventListener('click', moveLeft);
document.getElementById('nextBtn').addEventListener('click', moveRight);

</script>

<script defer>
    const mode = document.querySelector(".mode");
    const isDark = localStorage.getItem('isDark');
    if(isDark === 'Enabled'){
            mode.innerHTML= `<i class="fa fa-sun-o" aria-hidden="true" id="mode-icon"></i>`
            document.body.style.backgroundColor = 'black';
            document.body.style.color = 'white';
            document.querySelectorAll('.modeH').forEach(txt => txt.style.color = 'white');
            document.querySelectorAll('.modeP').forEach(p => p.style.color = 'black');
            document.querySelectorAll('#arrow').forEach(ar => ar.style.color = 'white');
    }else{
            mode.innerHTML= `<i class="fa fa-moon-o" aria-hidden="true" id="mode-icon"></i>`
            document.body.style.backgroundColor = 'white';
            document.body.style.color = 'black';
            document.querySelectorAll('.modeH').forEach(txt => txt.style.color = 'black');
    }
    mode.addEventListener('click',function(){
        if(document.body.style.backgroundColor==='white'){
            mode.innerHTML= `<i class="fa fa-sun-o" aria-hidden="true" id="mode-icon"></i>`
            document.body.style.backgroundColor = 'black';
            document.body.style.color = 'white';
            document.querySelectorAll('.modeH').forEach(txt => txt.style.color = 'white');
            document.querySelectorAll('.modeP').forEach(p => p.style.color = 'black');
            document.querySelectorAll('#arrow').forEach(ar => ar.style.color = 'white');
            localStorage.setItem('isDark','Enabled');
            
        }else{
            mode.innerHTML= `<i class="fa fa-moon-o" aria-hidden="true" id="mode-icon"></i>`
            document.body.style.backgroundColor = 'white';
            document.body.style.color = 'black';
            document.querySelectorAll('.modeH').forEach(txt => txt.style.color = 'black');
            localStorage.setItem('isDark','Disabled');
        }
        
})
/********************************************************************/
        const ham = document.querySelector('.hamburger');
        const hammm = document.querySelector('.hammm');

        ham.addEventListener('click',function(){
            if(hammm.className==='hammm'){
                hammm.classList.add('x');
            }else{
                hammm.classList.remove('x');
            }
        
        })
</script>
</body>
</html>